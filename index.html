<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PRAGATI - Unlock Your Potential</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #ffffff;
            color: #1f2937;
        }
        .hero-bg { background-color: #f0f9ff; }
        .text-teal { color: #0d9488; }
        .bg-teal { background-color: #0d9488; }
        .border-teal { border-color: #0d9488; }
        .btn-teal {
            background-color: #0d9488;
            color: white;
            transition: all 0.3s ease;
            box-shadow: 0 4px 14px 0 rgba(13, 148, 136, 0.39);
            animation: pulse-teal 2s infinite;
        }
        .btn-teal:hover {
            transform: scale(1.05);
            background-color: #0f766e;
            box-shadow: 0 6px 20px 0 rgba(13, 148, 136, 0.5);
            animation: none;
        }
        @keyframes pulse-teal {
            0% { transform: scale(0.98); box-shadow: 0 0 0 0 rgba(13, 148, 136, 0.7); }
            70% { transform: scale(1); box-shadow: 0 0 0 10px rgba(13, 148, 136, 0); }
            100% { transform: scale(0.98); box-shadow: 0 0 0 0 rgba(13, 148, 136, 0); }
        }
        .nav-login-btn { transition: all 0.2s ease-in-out; }
        .nav-login-btn:hover { transform: translateY(-2px); box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05); }
        .reveal {
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }
        .reveal.visible { opacity: 1; transform: translateY(0); }
    </style>
</head>
<body class="text-gray-800">

    <div id="app">
        <main id="landing-page" class="w-full">
            <header class="bg-white/80 backdrop-blur-md fixed top-0 left-0 right-0 z-50 shadow-sm">
                <div class="container mx-auto px-6 py-4 flex justify-between items-center">
                    <h1 class="text-2xl font-bold text-teal">PRAGATI</h1>
                    <button id="login-btn-nav" class="nav-login-btn border border-teal text-teal px-4 py-2 rounded-lg font-semibold hover:bg-teal hover:text-white">Log In</button>
                    <div id="user-info-nav" class="hidden items-center space-x-4">
                        <span id="user-name-nav" class="font-semibold text-gray-700"></span>
                        <button id="logout-btn-nav" class="nav-login-btn border border-red-500 text-red-500 px-4 py-2 rounded-lg font-semibold hover:bg-red-500 hover:text-white">Logout</button>
                    </div>
                </div>
            </header>

            <section class="hero-bg min-h-screen flex items-center justify-center pt-20">
                <div class="text-center z-10 p-6">
                    <h1 class="text-4xl md:text-6xl font-extrabold mb-4 leading-tight text-gray-900">Unlock Your Potential. <br class="hidden md:block"/> <span class="text-teal">Master Your Future.</span></h1>
                    <p class="text-lg md:text-xl max-w-3xl mx-auto mb-8 text-gray-600">PRAGATI is the interactive platform designed to help college students build the essential soft skills for academic, social, and professional success.</p>
                    <button id="cta-hero-btn" class="btn-teal text-white px-8 py-4 rounded-lg text-lg font-bold">Start Your Journey for Free</button>
                </div>
            </section>
            
            <section id="problem" class="py-20 bg-white">
                <div class="container mx-auto px-6 text-center">
                    <h2 class="text-3xl md:text-4xl font-bold mb-12 reveal text-gray-900">The Hidden Hurdle to Success</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
                        <div class="bg-gray-50 p-8 rounded-xl reveal shadow-md border border-gray-200">
                            <h3 class="text-xl font-semibold mb-2 text-gray-900">Communication</h3>
                            <p class="text-gray-600">Struggle to voice your ideas in discussions?</p>
                        </div>
                        <div class="bg-gray-50 p-8 rounded-xl reveal shadow-md border border-gray-200" style="transition-delay: 100ms;">
                            <h3 class="text-xl font-semibold mb-2 text-gray-900">Confidence</h3>
                            <p class="text-gray-600">Hesitate to take the lead in projects?</p>
                        </div>
                        <div class="bg-gray-50 p-8 rounded-xl reveal shadow-md border border-gray-200" style="transition-delay: 200ms;">
                            <h3 class="text-xl font-semibold mb-2 text-gray-900">Teamwork</h3>
                            <p class="text-gray-600">Find it hard to collaborate effectively?</p>
                        </div>
                        <div class="bg-gray-50 p-8 rounded-xl reveal shadow-md border border-gray-200" style="transition-delay: 300ms;">
                            <h3 class="text-xl font-semibold mb-2 text-gray-900">Leadership</h3>
                            <p class="text-gray-600">Feel unprepared to guide and inspire others?</p>
                        </div>
                    </div>
                </div>
            </section>

            <section id="how-it-works" class="py-20 bg-gray-50">
                <div class="container mx-auto px-6 text-center">
                    <h2 class="text-3xl md:text-4xl font-bold mb-16 reveal text-gray-900">Your Path to Confidence in 3 Simple Steps</h2>
                    <div class="flex flex-col md:flex-row justify-center items-center gap-8 md:gap-0 relative">
                        <div class="flex flex-col items-center text-center w-64 reveal">
                            <div class="bg-teal text-white rounded-full h-16 w-16 flex items-center justify-center text-2xl font-bold mb-4 border-4 border-teal-200">1</div>
                            <h3 class="text-xl font-semibold mb-2 text-gray-900">Assess Your Skills</h3>
                            <p class="text-gray-600">Take a quick quiz to identify your strengths.</p>
                        </div>
                        <div class="hidden md:block h-1 w-32 bg-teal-100"></div>
                        <div class="flex flex-col items-center text-center w-64 reveal" style="transition-delay: 200ms;">
                            <div class="bg-teal text-white rounded-full h-16 w-16 flex items-center justify-center text-2xl font-bold mb-4 border-4 border-teal-200">2</div>
                            <h3 class="text-xl font-semibold mb-2 text-gray-900">Get a Personalized Plan</h3>
                            <p class="text-gray-600">Receive a custom learning path for your goals.</p>
                        </div>
                        <div class="hidden md:block h-1 w-32 bg-teal-100"></div>
                        <div class="flex flex-col items-center text-center w-64 reveal" style="transition-delay: 400ms;">
                            <div class="bg-teal text-white rounded-full h-16 w-16 flex items-center justify-center text-2xl font-bold mb-4 border-4 border-teal-200">3</div>
                            <h3 class="text-xl font-semibold mb-2 text-gray-900">Learn & Grow</h3>
                            <p class="text-gray-600">Complete challenges and track your progress.</p>
                        </div>
                    </div>
                </div>
            </section>

            <section class="py-20 hero-bg">
                <div class="container mx-auto px-6 text-center z-10 relative">
                    <h2 class="text-3xl md:text-4xl font-bold mb-6 reveal text-gray-900">Ready to Shape Your Future?</h2>
                    <button id="cta-final-btn" class="btn-teal text-white px-8 py-4 rounded-lg text-lg font-bold reveal" style="transition-delay: 200ms;">Sign Up and Start Learning</button>
                </div>
            </section>

            <footer class="bg-gray-800 text-white py-6">
                <div class="container mx-auto px-6 text-center">
                    <p class="text-gray-400">&copy; 2025 PRAGATI. All rights reserved.</p>
                </div>
            </footer>
        </main>
        
        <div id="auth-modal" class="hidden fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50">
            <div class="bg-white p-8 rounded-xl shadow-2xl w-full max-w-md relative">
                <button id="close-modal-btn" class="absolute top-4 right-4 text-gray-500 hover:text-gray-800 text-2xl">&times;</button>
                <div class="relative flex border-b border-gray-200 mb-6">
                    <button id="login-tab" class="flex-1 py-2 font-semibold text-teal">Log In</button>
                    <button id="signup-tab" class="flex-1 py-2 font-semibold text-gray-500">Sign Up</button>
                    <div id="underline" class="absolute bottom-0 h-0.5 bg-teal transition-all duration-300 ease-in-out"></div>
                </div>

                <form id="login-form" class="space-y-4">
                    <input type="email" id="login-email" placeholder="Email" class="w-full p-3 border rounded-lg border-gray-300 focus:ring-teal focus:border-teal" required>
                    <input type="password" id="login-password" placeholder="Password" class="w-full p-3 border rounded-lg border-gray-300 focus:ring-teal focus:border-teal" required>
                    <p id="login-message" class="text-sm text-center text-gray-600"></p>
                    <button type="submit" id="login-submit-btn" class="w-full bg-teal text-white p-3 rounded-lg font-bold hover:bg-teal-700">Log In</button>
                </form>

                <form id="signup-form" class="hidden space-y-4">
                    <input type="text" id="signup-name" placeholder="Full Name" class="w-full p-3 border rounded-lg border-gray-300 focus:ring-teal focus:border-teal" required>
                    <input type="email" id="signup-email" placeholder="Email" class="w-full p-3 border rounded-lg border-gray-300 focus:ring-teal focus:border-teal" required>
                    <button type="button" id="send-otp-btn" class="w-full bg-gray-500 text-white p-3 rounded-lg font-bold hover:bg-gray-600">Send OTP</button>
                    <div id="otp-section" class="hidden space-y-4">
                        <input type="password" id="signup-password" placeholder="Create Password" class="w-full p-3 border rounded-lg border-gray-300 focus:ring-teal focus:border-teal" required>
                        <input type="text" id="signup-otp" placeholder="6-Digit OTP" class="w-full p-3 border rounded-lg border-gray-300 focus:ring-teal focus:border-teal" required>
                        <button type="submit" id="create-account-btn" class="w-full bg-teal text-white p-3 rounded-lg font-bold hover:bg-teal-700">Create Account</button>
                    </div>
                    <p id="form-message" class="text-sm text-center text-gray-600"></p>
                </form>
            </div>
        </div>
    </div>

    <script>
        // --- GOOGLE SCRIPT URL ---
        const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbxgvLGJfxDw9dnhddccv_dD7PIWQ-nCzqpsZWdHH_-5JKO53jKOzTMqnoCSNGUVcE_4/exec";
        
        // --- SCROLL ANIMATIONS ---
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                }
            });
        }, { threshold: 0.1 });
        document.querySelectorAll('.reveal').forEach(el => {
            observer.observe(el);
        });

        // --- AUTH MODAL & UI ---
        const authModal = document.getElementById('auth-modal');
        const loginBtnNav = document.getElementById('login-btn-nav');
        const userInfoNav = document.getElementById('user-info-nav');
        const userNameNav = document.getElementById('user-name-nav');
        const logoutBtnNav = document.getElementById('logout-btn-nav');
        const loginTab = document.getElementById('login-tab');
        const signupTab = document.getElementById('signup-tab');
        const underline = document.getElementById('underline');
        const loginForm = document.getElementById('login-form');
        const signupForm = document.getElementById('signup-form');

        const openAuthModal = () => { authModal.classList.remove('hidden'); moveUnderline(loginTab); }
        const closeAuthModal = () => authModal.classList.add('hidden');
        
        const moveUnderline = (target) => {
            underline.style.left = `${target.offsetLeft}px`;
            underline.style.width = `${target.offsetWidth}px`;
        };

        const updateNavUI = (userName) => {
            if (userName) {
                loginBtnNav.classList.add('hidden');
                userInfoNav.classList.add('flex');
                userInfoNav.classList.remove('hidden');
                userNameNav.textContent = `Welcome, ${userName}`;
            } else {
                loginBtnNav.classList.remove('hidden');
                userInfoNav.classList.add('hidden');
                userInfoNav.classList.remove('flex');
            }
        }

        // --- EVENT LISTENERS ---
        document.getElementById('close-modal-btn').addEventListener('click', closeAuthModal);
        loginBtnNav.addEventListener('click', openAuthModal);
        logoutBtnNav.addEventListener('click', () => {
            sessionStorage.removeItem('userName');
            updateNavUI(null);
        });

        document.addEventListener('DOMContentLoaded', () => {
            updateNavUI(sessionStorage.getItem('userName'));
        });

        const ctaButtons = [
            document.getElementById('cta-hero-btn'),
            document.getElementById('cta-final-btn')
        ];
        ctaButtons.forEach(button => {
            button.addEventListener('click', () => {
                const loggedInUser = sessionStorage.getItem('userName');
                if (loggedInUser) {
                    window.location.href = 'dashboard.html';
                } else {
                    openAuthModal();
                }
            });
        });

        loginTab.addEventListener('click', (e) => {
            moveUnderline(e.currentTarget);
            loginTab.classList.add('text-teal');
            signupTab.classList.remove('text-teal');
            loginForm.classList.remove('hidden');
            signupForm.classList.add('hidden');
        });

        signupTab.addEventListener('click', (e) => {
            moveUnderline(e.currentTarget);
            signupTab.classList.add('text-teal');
            loginTab.classList.remove('text-teal');
            signupForm.classList.remove('hidden');
            loginForm.classList.add('hidden');
        });
        
// --- LOGIN FORM LOGIC (Updated) ---
loginForm.addEventListener('submit', async (e) => {
    e.preventDefault();
    const loginBtn = document.getElementById('login-submit-btn');
    const loginMessage = document.getElementById('login-message');
    loginBtn.disabled = true;
    loginBtn.textContent = 'Logging In...';
    loginMessage.textContent = '';
    
    const formData = {
        action: 'login',
        email: document.getElementById('login-email').value,
        password: document.getElementById('login-password').value
    };

    try {
        const response = await fetch(SCRIPT_URL, { method: 'POST', body: JSON.stringify(formData) });
        const result = await response.json();

        if (result.status === 'success' && result.userName) {
            // --- NEW: Save all user data to session ---
            sessionStorage.setItem('userName', result.userName);
            sessionStorage.setItem('userEmail', formData.email); // Store email to know WHO to update
            sessionStorage.setItem('photoURL', result.photoURL || ''); // Store photo URL (or empty string)
            
            loginMessage.textContent = `Welcome, ${result.userName}! Redirecting...`;
            loginMessage.style.color = 'green';
            setTimeout(() => { window.location.href = 'dashboard.html'; }, 500);

        } else if (result.status === 'success' && !result.userName) {
            throw new Error("Login successful, but profile name is missing.");
        } else {
            throw new Error(result.message);
        }
    } catch (error) {
        loginMessage.textContent = 'Error: ' + error.message;
        loginMessage.style.color = 'red';
        loginBtn.disabled = false;
        loginBtn.textContent = 'Log In';
    }
});
        // --- SIGNUP FORM LOGIC ---
        const sendOtpBtn = document.getElementById('send-otp-btn');
        const createAccountBtn = document.getElementById('create-account-btn');
        const otpSection = document.getElementById('otp-section');
        const formMessage = document.getElementById('form-message');
        sendOtpBtn.addEventListener('click', async () => {
            const email = document.getElementById('signup-email').value;
            if (!email) { formMessage.textContent = "Please enter your email."; return; }
            sendOtpBtn.disabled = true; sendOtpBtn.textContent = 'Sending...';
            try {
                const response = await fetch(SCRIPT_URL, { method: 'POST', body: JSON.stringify({ action: 'requestOTP', email: email }) });
                const result = await response.json();
                if (result.status === 'success') {
                    formMessage.textContent = 'OTP has been sent!';
                    otpSection.classList.remove('hidden');
                    sendOtpBtn.classList.add('hidden');
                } else { throw new Error(result.message); }
            } catch (error) {
                formMessage.textContent = 'Error: ' + error.message;
                sendOtpBtn.disabled = false; sendOtpBtn.textContent = 'Send OTP';
            }
        });
        signupForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            createAccountBtn.disabled = true; createAccountBtn.textContent = 'Creating...';
            const formData = {
                action: 'submitSignup',
                name: document.getElementById('signup-name').value,
                email: document.getElementById('signup-email').value,
                password: document.getElementById('signup-password').value,
                otp: document.getElementById('signup-otp').value
            };
            try {
                const response = await fetch(SCRIPT_URL, { method: 'POST', body: JSON.stringify(formData) });
                const result = await response.json();
                if (result.status === 'success') {
                    formMessage.textContent = "Success! Please log in.";
                    signupForm.reset();
                    otpSection.classList.add('hidden');
                    sendOtpBtn.classList.remove('hidden');
                } else { throw new Error(result.message); }
            } catch (error) {
                formMessage.textContent = 'Error: ' + error.message;
            } finally {
                createAccountBtn.disabled = false; createAccountBtn.textContent = 'Create Account';
            }
        });
    </script>
</body>
</html>